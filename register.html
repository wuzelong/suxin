<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>注册</title>
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link href="favicon.ico" rel="shortcut icon" />
    <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
    <link type="text/css" href="css/animatemin.css" rel="stylesheet"/>
    <link type="text/css" href="bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link type="text/css" href="css/model.css" rel="stylesheet"/>
    <link type="text/css" href="css/register.css" rel="stylesheet"/>
    <link type="text/css" href="css/TGTool.css" rel="stylesheet"/>
    <script type="text/javascript" src="js/TGTool.js"></script>
    <script type="text/javascript" src="bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
<!-- 搭建显示页面和登录表单 -->
<div id="container">
    <!-- logo信息 -->
    <div class="col-md-3 col-md-offset-9" style="top:10px;left: 125px">
        <p style="font-size:50px;color: white;font-family: 方正粗黑宋简体"><img src="images/宿心图标 -白.png"height="18%" width="18%">
            <B style="font-weight:800;position: absolute;top: 10px;">&nbsp宿心</B></p>
    </div>

    <!-- 英文 -->
    <img class="center-block" src="images/英文.png"height="50px" width="345px">

    <!-- 登录表单 -->
    <div id="content" class="center-block animate__animated animate__zoomIn animate__delay-0.6s">
        <div class="form-group">
            <p style="font-family: 方正粗黑宋简体;color: rgb(51, 51, 51)">注册</p>
            <img src="images/line.png"style="position:relative;top: -20px">
        </div>
        <div class="form-group">
            <div class="row">
            <select class="form-control"id="num">
                <option selected="selected">+86</option>
                <option>+1</option>
                <option>+33</option>
                <option>+44</option>
            </select>
            <input type="text" class="form-control myinput" id="user_login_name" name="loginid" placeholder="请输入电话号码"
                   style="height: 40px;width: 280px;position:relative;top: -55px;left: 140px;width: 205px"/>
            </div>
        </div>

        <div class="form-group">
            <div class="row">
                <input type="text" class="form-control myinput"placeholder="请输入验证码"id="codeInput">
                <input type="button" value="获取验证码" id="codeBtn">
            </div>
        </div>

        <div class="form-group" >
            <input type="password" class="form-control myinput" id="user_login_password" name="password" placeholder="请设置密码"
                   style="height: 40px;width: 280px;position:relative;left: 50px;top:-60px"/>
        </div>

        <input type="button"id="user_register_btn" value="注  册">
        <div class="row"style="position: relative;top: -30px;font-size: 15px">
            已有账户？<a href="login.html">点此登录</a>
        </div>
    </div>

</div>

<!--返回首页-->
<div class="backBox">
    <a href="index.html">
        <img src="images/白箭头.png"height="16px"width="18px"><B>返回首页</B>
    </a>
</div>

<!--底部-->
<div class="bot">
    <div class="col-md-6 col-md-offset-4"style="left: 45px;top: 8px">隐私协议 | 用户协议 | 关于我们 | 我是房客 | 加入宿心 | 网站地图</div>
    <div class="col-md-6 col-md-offset-5"style="left: 45px;top: 10px">© 2020 jmu.com版权所有</div>
</div>

<!--右侧交互-->
<div class="rightBox">
    <ul>
        <li class="weixin">
            <div class="weixin-logo"></div>
        </li>
        <li class="app"style="background:url(images/意见反馈.png);background-size: 100% 100%;">
            <div class="app-logo"></div>
        </li>
        <li class="idea">
            <div class="idea-logo"></div>
        </li>
    </ul>
</div>
<script type="text/javascript">
    let tg = TGTool();
    let phoneRule=/^1[0-9]{10}$/;
    $("#codeBtn").on("click", function() {
        $("#codeInput").attr("value",Math.floor(Math.random()*10000));
    })
    $("#user_register_btn").on("click", function() {
        var id=$("#user_login_name").val();
        var pwd=$("#user_login_password").val();
        if(id=="")
            tg.warning("请输入电话号码！");
        else if(pwd=="")
            tg.warning("请输入密码！");
        else if( $("#codeInput").val()=="")
            tg.warning("请输入验证码！");
        else if(!phoneRule.test(id))
            tg.warning("手机号格式错误！");
        else{
            //发送登录请求
            $.ajax({
                url:"register.php",
                type:"POST",
                data:{username:id,password:pwd},
                success:function (result) {
                    if(result==200){
                        tg.error("该手机号已注册！");
                    }else{
                        tg.success("注册成功!");
                        setTimeout(function(){
                            window.location.href="login.html?phone="+id;
                        },3100);
                    }
                }
            });
        }
    })
</script>
</body>
</html>